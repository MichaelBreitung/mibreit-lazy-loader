import{getElements as l}from"../node_modules/mibreit-dom-tools/lib/index.js";import m from"../components/Element.js";import E from"../components/ElementSurrogate.js";import d from"../components/ScrollLoader.js";import c from"../components/LazyLoader.js";import{checkLazyLoaderConfig as u,ELazyMode as r}from"../types/index.js";function O(e){if(typeof e!="string")throw new Error("createLazyLoader - first parameter needs to be a css selector string")}async function i(e,t=r.SIMPLE_DEFER,o){if(t!=null)switch(t){case r.WINDOWED_EXTERNAL:await e.loadElement(0),e.setCurrentIndex(0);break;case r.WINDOWED_SCROLL:case r.WINDOWED_SCROLL_HORIZONTAL:new d(e,o).startLoader();break;case r.SIMPLE_DEFER:default:e.loadAll();break}else e.loadAll()}function D(e,t){u(t);let o=e;if(t!=null&&t.useSurrogate){const s=[];if(t.mode===r.WINDOWED_SCROLL||t.mode===r.WINDOWED_SCROLL_HORIZONTAL)for(let L=0;L<e.length;L++){const n=new E(e[L],t.mode===r.WINDOWED_SCROLL_HORIZONTAL);s.push(n)}o=s}const a=new c(e,t.loaderWindowLeft,t.loaderWindowRight);return setTimeout(()=>{i(a,t.mode,o)},0),a}function h(e,t){O(e);const o=l(e),a=[];for(let s=0;s<o.length;s++){const L=new m(o[s]);a.push(L)}return D(a,t)}export{h as createLazyLoader,D as createLazyLoaderFromElements};
